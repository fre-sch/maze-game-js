!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=3)}([function(t,e,i){t.exports=i.p+"tiles.c2f1160b45a03498badfba3140f4022c.png"},function(t,e,i){t.exports=i.p+"sprites.d7e375c22eb961e72867280e349a8e49.png"},function(t,e,i){},function(t,e,i){"use strict";i.r(e);i(2);function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}var a=function(t,e,i){return Math.max(e,Math.min(i,t))},o=function(t){return~t>>>0},h=function(t,e,i){var r=(1<<i)-1;return t<<(e%=i)&r|(t&r)>>i-e},l=function(t){for(var e=0,i=1779033703^t.length;e<t.length;e++)i=(i=Math.imul(i^t.charCodeAt(e),3432918353))<<13|i>>>19;return function(){return i=Math.imul(i^i>>>16,2246822507),i=Math.imul(i^i>>>13,3266489909),(i^=i>>>16)>>>0}},u=function(){function t(e){r(this,t),this.state=e}return s(t,[{key:"next",value:function(){var t=this.state+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967295}}]),t}(),f=function(){function t(e){r(this,t),void 0!==e&&(e=parseInt(e,36)),e||(e=(new Date).toISOString(),e=l(e)()),this.generator=new u(e)}return s(t,[{key:"next",value:function(){return this.generator.next()}},{key:"getState",value:function(){return this.generator.state.toString(36)}}]),t}();function c(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=e,this.height=i,this.cells=new Array(this.width*this.height).fill(0)}var e,i,r;return e=t,(i=[{key:"reset",value:function(){this.cells=new Array(this.width*this.height).fill(0)}},{key:"within",value:function(t,e){return t>=0&&t<this.width&&e>=0&&e<this.height}},{key:"set",value:function(t,e,i){t=a(t,0,this.width-1),e=a(e,0,this.height-1),this.cells[e*this.width+t]=i}},{key:"get",value:function(t,e){return t=a(t,0,this.width-1),e=a(e,0,this.height-1),this.cells[e*this.width+t]}},{key:"getDefault",value:function(t,e,i){return this.within(t,e)?this.cells[e*this.width+t]:i}},{key:"fill",value:function(t,e,i,r,n){t=a(t,0,this.width-1),e=a(e,0,this.height-1),i=a(i,0,this.width-t),r=a(r,0,this.height-e);for(var s=0;s<r;++s)for(var o=0;o<i;++o)this.set(t+o,e+s,n)}}])&&c(e.prototype,i),r&&c(e,r),t}(),d={NorthDoor:Math.pow(2,0),NorthWall:Math.pow(2,1),EastDoor:Math.pow(2,2),EastWall:Math.pow(2,3),SouthDoor:Math.pow(2,4),SouthWall:Math.pow(2,5),WestDoor:Math.pow(2,6),WestWall:Math.pow(2,7),ALL:256};d.North=d.NorthDoor|d.NorthWall,d.East=d.EastDoor|d.EastWall,d.South=d.SouthDoor|d.SouthWall,d.West=d.WestDoor|d.WestWall,d.DOOR_MASK=d.NorthDoor|d.EastDoor|d.SouthDoor|d.WestDoor,d.WALL_MASK=d.NorthWall|d.EastWall|d.SouthWall|d.WestWall;var v=[{x:0,y:-1},{x:0,y:-1},{x:1,y:0},{x:1,y:0},{x:0,y:1},{x:0,y:1},{x:-1,y:0},{x:-1,y:0}],y=function(t,e,i){return{x:t+v[i].x,y:e+v[i].y}},w=function(t){return h(t,4,8)},S=function(t,e,i){var r=i|h(i,1,8);return e=w(e)&r,t&o(r)|e},g=function t(e,i,r,n,s,a){var l=s=w(s);a>0&&(l=function(t,e){var i=Math.floor(t.next()*d.ALL),r=Math.floor(t.next()*d.ALL),n=i&d.DOOR_MASK|e&d.DOOR_MASK;return(r&d.WALL_MASK|e&d.WALL_MASK)&o(h(n,1,8))|n}(i,s)),l=function(t,e,i,r){for(var n=0;n<8;n+=2){var s=1<<n,a=1<<n+1,h=y(e,i,n);if(t.within(h.x,h.y)){var l=t.get(h.x,h.y);0!==l&&(r=S(r,l,s))}else r&=o(s|a)}return r}(e,r,n,l),e.set(r,n,l);for(var u=0;u<8;u++){var f=1<<u,c=y(r,n,u);if(e.within(c.x,c.y)){var p=e.get(c.x,c.y);0!=(l&f)&&f!==s&&0===p&&t(e,i,c.x,c.y,f,a-1)}}};function m(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var M=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.xDown=null,this.yDown=null,this.element=e,this.element.addEventListener("touchstart",this.handleTouchStart.bind(this),!1),this.element.addEventListener("touchmove",this.handleTouchMove.bind(this),!1)}var e,i,r;return e=t,(i=[{key:"handleTouchStart",value:function(t){this.xDown=t.touches[0].clientX,this.yDown=t.touches[0].clientY}},{key:"handleTouchMove",value:function(t){if(this.xDown&&this.yDown&&this.onSwipe){var e=t.touches[0].clientX,i=t.touches[0].clientY;this.xDiff=this.xDown-e,this.yDiff=this.yDown-i,Math.abs(this.xDiff)>Math.abs(this.yDiff)?this.xDiff>0?this.onSwipe(t,"SwipeLeft"):this.onSwipe(t,"SwipeRight"):(this.yDiff>0?this.onSwipe(t,"SwipeUp"):this.onSwipe(t,"SwipeDown"),t.preventDefault()),this.xDown=null,this.yDown=null}}}])&&m(e.prototype,i),r&&m(e,r),t}(),x=i(0),O=i.n(x),E=i(1),b=i.n(E);function D(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var I,k={ROOM_SIZE:5,SCALE:32,ITERATIONS:12},z=new f(window.location.hash.substr(1)),L=function(t,e,i){return t.get(e,i)*(t.getDefault(e,i-1,1)|t.getDefault(e+1,i,1)<<1|t.getDefault(e,i+1,1)<<2|t.getDefault(e-1,i,1)<<3)},A=function(t,e){try{return new OffscreenCanvas(t,e)}catch(r){var i=document.createElement("canvas");return i.width=t,i.height=e,i}},_=function(t){return new Promise(function(e,i){var r=new Image;r.addEventListener("load",function(){return e(r)}),r.addEventListener("error",function(t){return i(t)}),r.src=t})},W={offset:{x:0,y:-1},mask:d.North},R={offset:{x:1,y:0},mask:d.East},C={offset:{x:0,y:1},mask:d.South},T={offset:{x:-1,y:0},mask:d.West},G=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.ctx=this.canvas.getContext("2d"),this.bgCanvas=A(this.canvas.width,this.canvas.height),this.mazeGrid=new p(parseInt(e.width/k.SCALE/k.ROOM_SIZE),parseInt(e.height/k.SCALE/k.ROOM_SIZE)),this.tileGrid=new p(parseInt(e.width/k.SCALE),parseInt(e.height/k.SCALE)),this.player={health:3},window.addEventListener("keydown",function(t){return i.handleInput(t,t.key)}),new M(e).onSwipe=function(t,e){return i.handleInput(t,e)},Promise.all([_(O.a),_(b.a)]).then(function(t){i.tiles=t[0],i.tileSize=i.tiles.naturalWidth/4,i.sprites=t[1],i.spriteSize=8,i.reset()})}var e,i,r;return e=t,(i=[{key:"reset",value:function(t){t&&window.history.pushState(null,null,"#"+z.getState()),this.mazeGrid.reset(),this.tileGrid.reset();var e=parseInt(this.mazeGrid.width/2),i=parseInt(this.mazeGrid.height/2);g(this.mazeGrid,z,e,i,0,k.ITERATIONS),function(t,e){var i=new p(t.width,t.height);i.fill(0,0,i.width,i.height,1);for(var r=0,n=e.height;r<n;r++)for(var s=0,a=e.width;s<a;s++){var o=e.get(s,r);if(0!==o){var h=Math.floor(k.ROOM_SIZE/3),l=s*k.ROOM_SIZE,u=r*k.ROOM_SIZE;i.fill(l+1,u+1,k.ROOM_SIZE-2,k.ROOM_SIZE-2,0),0!=(o&d.NorthDoor)&&i.fill(l+1+h,u,h,1,0),0!=(o&d.NorthWall)&&i.fill(l+1,u,k.ROOM_SIZE-2,1,0),0!=(o&d.EastDoor)&&i.fill(l+k.ROOM_SIZE-1,u+1+h,1,h,0),0!=(o&d.EastWall)&&i.fill(l+k.ROOM_SIZE-1,u+1,1,k.ROOM_SIZE-2,0),0!=(o&d.SouthDoor)&&i.fill(l+1+h,u+k.ROOM_SIZE-1,h,1,0),0!=(o&d.SouthWall)&&i.fill(l+1,u+k.ROOM_SIZE-1,k.ROOM_SIZE-2,1,0),0!=(o&d.WestDoor)&&i.fill(l,u+1+h,1,h,0),0!=(o&d.WestWall)&&i.fill(l,u+1,1,k.ROOM_SIZE-2,0)}}for(var f=0,c=t.height;f<c;f++)for(var v=0,y=t.width;v<y;v++)t.set(v,f,L(i,v,f))}(this.tileGrid,this.mazeGrid),this.drawMaze(this.bgCanvas.getContext("2d")),this.player.pos={x:e,y:i,dir:1},this.generateTreasures(),this.draw()}},{key:"generateTreasures",value:function(){this.numTreasures=3+Math.round(9*z.next()),this.treasures=[];for(var t=1e3;this.treasures.length<this.numTreasures&&t>0;){t--;var e={x:parseInt(z.next()*this.mazeGrid.width),y:parseInt(z.next()*this.mazeGrid.height)};0!==this.mazeGrid.get(e.x,e.y)&&this.treasures.push(e)}}},{key:"playerMoveBy",value:function(t){var e,i,r,n,s=this.player.pos.x,a=this.player.pos.y;this.player.pos.dir=t.x>=0?1:-1,e=500,i=function(e){this.player.pos.x=s+t.x*e,this.player.pos.y=a+t.y*e,1===e&&this.checkGemsCollected(),this.draw()}.bind(this),n=null,r=function(t){null===n&&(n=t);var s=(t-n)/e;s<1?(i(s),window.requestAnimationFrame(r)):i(1)},window.requestAnimationFrame(r)}},{key:"playerMove",value:function(t){var e={x:this.player.pos.x+t.offset.x,y:this.player.pos.y+t.offset.y},i=this.mazeGrid.get(this.player.pos.x,this.player.pos.y),r=0!=(this.mazeGrid.get(e.x,e.y)&w(t.mask));0!=(i&t.mask)&&r&&this.playerMoveBy(t.offset)}},{key:"checkGemsCollected",value:function(){this.treasures=this.treasures.filter(function(t){return!(t.x===this.player.pos.x&&t.y===this.player.pos.y)}.bind(this)),0===this.treasures.length&&this.reset(!0)}},{key:"handleInput",value:function(t,e){switch(e){case"SwipeUp":case"ArrowUp":this.playerMove(W),t.preventDefault();break;case"SwipeDown":case"ArrowDown":this.playerMove(C),t.preventDefault();break;case"SwipeLeft":case"ArrowLeft":this.playerMove(T),t.preventDefault();break;case"SwipeRight":case"ArrowRight":this.playerMove(R),t.preventDefault()}}},{key:"draw",value:function(){this.ctx.drawImage(this.bgCanvas,0,0),this.drawTreasures(this.ctx),this.drawPlayer(this.ctx)}},{key:"drawMaze",value:function(t){t.save(),t.scale(parseInt(k.SCALE/this.tileSize),parseInt(k.SCALE/this.tileSize)),t.imageSmoothingEnabled=!1;for(var e=0,i=this.tileGrid.height;e<i;e++)for(var r=0,n=this.tileGrid.width;r<n;r++)this.drawTile(t,r,e,this.tileGrid.get(r,e));t.restore()}},{key:"drawTile",value:function(t,e,i,r){var n=r%4*this.tileSize,s=Math.floor(r/4)*this.tileSize;t.drawImage(this.tiles,n,s,this.tileSize,this.tileSize,e*this.tileSize,i*this.tileSize,this.tileSize,this.tileSize)}},{key:"drawPlayer",value:function(t){var e=Math.floor(k.SCALE/this.spriteSize),i=k.ROOM_SIZE*this.spriteSize,r=k.ROOM_SIZE*this.spriteSize*.5-.5*this.spriteSize;t.save(),t.scale(e,e),t.translate(this.player.pos.x*i+r,this.player.pos.y*i+r),t.imageSmoothingEnabled=!1,t.scale(this.player.pos.dir,1),t.drawImage(this.sprites,0,0,this.spriteSize,this.spriteSize,0,0,this.spriteSize*this.player.pos.dir,this.spriteSize),t.restore()}},{key:"drawTreasures",value:function(t){var e=Math.floor(k.SCALE/this.spriteSize),i=k.ROOM_SIZE*this.spriteSize,r=k.ROOM_SIZE*this.spriteSize*.5-.5*this.spriteSize;t.save(),t.scale(e,e),t.imageSmoothingEnabled=!1;for(var n=0,s=this.treasures.length;n<s;n++)t.drawImage(this.sprites,8,0,this.spriteSize,this.spriteSize,this.treasures[n].x*i+r,this.treasures[n].y*i+r,this.spriteSize,this.spriteSize);t.restore()}}])&&D(e.prototype,i),r&&D(e,r),t}(),Z=document.createElement("div");I=function(t){Z.style.display="none",Z.removeEventListener("click",I)},Z.classList.add("start-screen"),Z.addEventListener("click",I),Z.innerHTML='\n<div>\n<div class="title">Collect Gems</div>\n<div>Press arrow keys to move.</div>\n<div>Or swipe to move.</div>\n<div>Click or tap to start</div>\n</div>\n';var P=document.createElement("canvas");document.body.appendChild(P),document.body.appendChild(Z),window.game=new G(P)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL3RpbGVzLnBuZyIsIndlYnBhY2s6Ly8vLi9hc3NldHMvc3ByaXRlcy5wbmciLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzLmpzIiwid2VicGFjazovLy8uL3NyYy9ncmlkLmpzIiwid2VicGFjazovLy8uL3NyYy9tYXplZ2VuLmpzIiwid2VicGFjazovLy8uL3NyYy9zd2lwZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImNsYW1wIiwidmFsIiwibWluIiwibWF4IiwiTWF0aCIsIm5vdCIsInJvdGwiLCJzaGlmdENvdW50Iiwic2l6ZSIsInNpemVNYXNrIiwieG11cjMiLCJzdHIiLCJoIiwibGVuZ3RoIiwiaW11bCIsImNoYXJDb2RlQXQiLCJNdWxiZXJyeTMyIiwic2VlZCIsInRoaXMiLCJzdGF0ZSIsIlJhbmRvbSIsImluaXRTZWVkIiwidW5kZWZpbmVkIiwicGFyc2VJbnQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJnZW5lcmF0b3IiLCJuZXh0IiwidG9TdHJpbmciLCJHcmlkIiwid2lkdGgiLCJoZWlnaHQiLCJjZWxscyIsIkFycmF5IiwiZmlsbCIsIngiLCJ5IiwiZGVmYXVsdFZhbHVlIiwid2l0aGluIiwieDEiLCJ5MSIsInciLCJzZXQiLCJGZWF0dXJlIiwiTm9ydGhEb29yIiwiTm9ydGhXYWxsIiwiRWFzdERvb3IiLCJFYXN0V2FsbCIsIlNvdXRoRG9vciIsIlNvdXRoV2FsbCIsIldlc3REb29yIiwiV2VzdFdhbGwiLCJBTEwiLCJOb3J0aCIsIkVhc3QiLCJTb3V0aCIsIldlc3QiLCJET09SX01BU0siLCJXQUxMX01BU0siLCJPRkZTRVQiLCJvZmZzZXQiLCJkaXIiLCJzaGlmdEZlYXR1cmUiLCJmZWF0dXJlcyIsIm1lcmdlRmVhdHVyZXMiLCJhIiwiYiIsIm1hc2siLCJnZW5lcmF0ZSIsImdyaWQiLCJyYW5kb20iLCJwcmV2aW91cyIsIml0ZXIiLCJyYW5kb21Eb29ycyIsImZsb29yIiwicmFuZG9tV2FsbHMiLCJkb29ycyIsImdlbmVyYXRlRmVhdHVyZXMiLCJkaXIxIiwiZXhpc3RpbmdGZWF0dXJlcyIsIm1lcmdlQWRqYWNlbnQiLCJTd2lwZSIsImVsZW1lbnQiLCJ4RG93biIsInlEb3duIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZVRvdWNoU3RhcnQiLCJoYW5kbGVUb3VjaE1vdmUiLCJldmVudCIsInRvdWNoZXMiLCJjbGllbnRYIiwiY2xpZW50WSIsIm9uU3dpcGUiLCJ4VXAiLCJ5VXAiLCJ4RGlmZiIsInlEaWZmIiwiYWJzIiwicHJldmVudERlZmF1bHQiLCJoaWRlU3RhcnRTY3JlZW4iLCJQYXJhbSIsIlJPT01fU0laRSIsIlNDQUxFIiwiSVRFUkFUSU9OUyIsIndpbmRvdyIsImxvY2F0aW9uIiwiaGFzaCIsInN1YnN0ciIsImNvbXB1dGVUaWxlIiwiZ2V0RGVmYXVsdCIsIm9mZnNjcmVlbkNhbnZhcyIsIk9mZnNjcmVlbkNhbnZhcyIsImNhbnZhcyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImxvYWRJbWFnZSIsInNyYyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiaW1nIiwiSW1hZ2UiLCJlcnIiLCJNb3ZlTm9ydGgiLCJNb3ZlRWFzdCIsIk1vdmVTb3V0aCIsIk1vdmVXZXN0IiwiR2FtZSIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsImN0eCIsImdldENvbnRleHQiLCJiZ0NhbnZhcyIsIm1hemVHcmlkIiwidGlsZUdyaWQiLCJwbGF5ZXIiLCJoZWFsdGgiLCJlIiwiaGFuZGxlSW5wdXQiLCJzd2lwZURpciIsImFsbCIsIlRpbGVJbWFnZSIsIlNwcml0ZXNJbWFnZSIsInRoZW4iLCJpbWFnZXMiLCJ0aWxlcyIsInRpbGVTaXplIiwibmF0dXJhbFdpZHRoIiwic3ByaXRlcyIsInNwcml0ZVNpemUiLCJyZXNldCIsIm5ld0hhc2giLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwiZ2V0U3RhdGUiLCJjZW50ZXJYIiwiY2VudGVyWSIsInRtcEdyaWQiLCJteSIsIm1oIiwibXgiLCJtdyIsImRvb3JTaXplIiwidHgiLCJ0eSIsInRoIiwidHciLCJnZW5lcmF0ZVRpbGVzIiwiZHJhd01hemUiLCJwb3MiLCJnZW5lcmF0ZVRyZWFzdXJlcyIsImRyYXciLCJudW1UcmVhc3VyZXMiLCJyb3VuZCIsInRyZWFzdXJlcyIsImNoZWNrIiwidHJlYXN1cmUiLCJwdXNoIiwiZGVsdGFWZWN0b3IiLCJkdXJhdGlvbk1zIiwiZnJhbWVGbiIsImZyYW1lRm5XcmFwcGVyIiwiaW5pdGlhbCIsImluaXRYIiwiaW5pdFkiLCJkZWx0YSIsImNoZWNrR2Vtc0NvbGxlY3RlZCIsInRpbWVzdGFtcCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInRhcmdldCIsInJvb21Gcm9tIiwiY2FuTW92ZVRvIiwicGxheWVyTW92ZUJ5IiwiZmlsdGVyIiwiZ2VtIiwiaW5wdXQiLCJwbGF5ZXJNb3ZlIiwiZHJhd0ltYWdlIiwiZHJhd1RyZWFzdXJlcyIsImRyYXdQbGF5ZXIiLCJzYXZlIiwic2NhbGUiLCJpbWFnZVNtb290aGluZ0VuYWJsZWQiLCJkcmF3VGlsZSIsInJlc3RvcmUiLCJ0aWxlSWQiLCJzeCIsInN5Iiwib2Zmc2V0TXVsdCIsInRyYW5zbGF0ZSIsInN0YXJ0U2NyZWVuIiwic3R5bGUiLCJkaXNwbGF5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsImFkZCIsImlubmVySFRNTCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImdhbWUiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixHQUZBMUIsRUFBb0JrQixFQUFFTyxHQUN0QlgsT0FB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LEVBQVk3SCxpQkFBaUIsUUFBU2MsR0FDdEMrRyxFQUFZTSxVQUFaLGlLQVFBLElBQUl4RyxFQUFTQyxTQUFTQyxjQUFjLFVBQ3BDRCxTQUFTd0csS0FBS0MsWUFBWTFHLEdBQzFCQyxTQUFTd0csS0FBS0MsWUFBWVIsR0FDMUIxRyxPQUFPbUgsS0FBTyxJQUFJNUYsRUFBS2YiLCJmaWxlIjoibWFpbi4zMjc3NTY1OWU2ODk4N2M5YmRhMi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAzKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcInRpbGVzLmMyZjExNjBiNDVhMDM0OThiYWRmYmEzMTQwZjQwMjJjLnBuZ1wiOyIsIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcInNwcml0ZXMuZDdlMzc1YzIyZWI5NjFlNzI4NjcyODBlMzQ5YThlNDkucG5nXCI7IiwiZXhwb3J0IGNvbnN0IGNsYW1wID0gZnVuY3Rpb24gKHZhbCwgbWluLCBtYXgpIHtcbiAgcmV0dXJuIE1hdGgubWF4KG1pbiwgTWF0aC5taW4obWF4LCB2YWwpKVxufVxuXG5leHBvcnQgY29uc3Qgbm90ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIC8vIGphdmFzY3JpcHQgYml0d2lzZSBub3QgKH52YWx1ZSkgcmVzdWx0cyBpbiBzaWduIGJpdCBmbGlwXG4gIC8vIG1ha2luZyB2YWx1ZSBhIHNpZ25lZCB2YWx1ZSwgbWFrZSBpdCB1bnNpZ25lZFxuICByZXR1cm4gfnZhbHVlID4+PiAwXG59XG5cbmV4cG9ydCBjb25zdCByb3RsID0gZnVuY3Rpb24gKHZhbCwgc2hpZnRDb3VudCwgc2l6ZSkge1xuICAvLyByb3RhdGUgYml0cyBsZWZ0IGJ5IHNoaWZ0Q291bnQgYW5kIHdyYXAgYXQgc2l6ZVxuICBzaGlmdENvdW50ID0gc2hpZnRDb3VudCAlIHNpemVcbiAgbGV0IHNpemVNYXNrID0gKDEgPDwgc2l6ZSkgLSAxXG4gIHJldHVybiAoXG4gICAgKHZhbCA8PCBzaGlmdENvdW50KSAmIHNpemVNYXNrXG4gICAgfCAodmFsICYgc2l6ZU1hc2spID4+IChzaXplIC0gc2hpZnRDb3VudClcbiAgKVxufVxuXG4vLyBmdW5jdGlvbiBmcmFtZUZuKGRlbHRhKVxuLy8gZGVsdGEgaXMgYSBkb3VibGUgZnJvbSAwIHRvIDFcbmV4cG9ydCBjb25zdCByb3V0aW5lID0gZnVuY3Rpb24gKGR1cmF0aW9uTXMsIGZyYW1lRm4pIHtcbiAgbGV0IGluaXRpYWwgPSBudWxsXG4gIGxldCBmcmFtZUZuV3JhcHBlcjtcbiAgZnJhbWVGbldyYXBwZXIgPSBmdW5jdGlvbih0aW1lc3RhbXApIHtcbiAgICBpZiAoaW5pdGlhbCA9PT0gbnVsbCkgaW5pdGlhbCA9IHRpbWVzdGFtcFxuICAgIGxldCBkZWx0YSA9ICh0aW1lc3RhbXAgLSBpbml0aWFsKSAvIGR1cmF0aW9uTXNcbiAgICBpZiAoZGVsdGEgPCAxKSB7XG4gICAgICBmcmFtZUZuKGRlbHRhKVxuICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShmcmFtZUZuV3JhcHBlcilcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBmcmFtZUZuKDEpXG4gICAgfVxuICB9XG4gIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnJhbWVGbldyYXBwZXIpXG59XG5cblxuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNTIxMjk1L3NlZWRpbmctdGhlLXJhbmRvbS1udW1iZXItZ2VuZXJhdG9yLWluLWphdmFzY3JpcHRcbmV4cG9ydCBjb25zdCB4bXVyMyA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGggPSAxNzc5MDMzNzAzIF4gc3RyLmxlbmd0aDsgaSA8IHN0ci5sZW5ndGg7IGkrKylcbiAgICBoID0gTWF0aC5pbXVsKGggXiBzdHIuY2hhckNvZGVBdChpKSwgMzQzMjkxODM1MyksXG4gICAgICBoID0gaCA8PCAxMyB8IGggPj4+IDE5O1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGggPSBNYXRoLmltdWwoaCBeIGggPj4+IDE2LCAyMjQ2ODIyNTA3KTtcbiAgICBoID0gTWF0aC5pbXVsKGggXiBoID4+PiAxMywgMzI2NjQ4OTkwOSk7XG4gICAgcmV0dXJuIChoIF49IGggPj4+IDE2KSA+Pj4gMDtcbiAgfVxufVxuXG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy81MjEyOTUvc2VlZGluZy10aGUtcmFuZG9tLW51bWJlci1nZW5lcmF0b3ItaW4tamF2YXNjcmlwdFxuZXhwb3J0IGNsYXNzIE11bGJlcnJ5MzIge1xuICBjb25zdHJ1Y3RvcihzZWVkKSB7XG4gICAgdGhpcy5zdGF0ZSA9IHNlZWRcbiAgfVxuICBuZXh0KCkge1xuICAgIGxldCB0ID0gdGhpcy5zdGF0ZSArPSAweDZEMkI3OUY1XG4gICAgdCA9IE1hdGguaW11bCh0IF4gdCA+Pj4gMTUsIHQgfCAxKVxuICAgIHQgXj0gdCArIE1hdGguaW11bCh0IF4gdCA+Pj4gNywgdCB8IDYxKVxuICAgIHJldHVybiAoKHQgXiB0ID4+PiAxNCkgPj4+IDApIC8gNDI5NDk2NzI5NVxuICB9XG59XG5cbi8vIFNlZWRhYmxlIHJhbmRvbSB3aXRoIHN0YXRlXG5leHBvcnQgY2xhc3MgUmFuZG9tIHtcbiAgY29uc3RydWN0b3IoaW5pdFNlZWQpIHtcbiAgICBpZiAoaW5pdFNlZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaW5pdFNlZWQgPSBwYXJzZUludChpbml0U2VlZCwgMzYpXG4gICAgfVxuICAgIGlmICghaW5pdFNlZWQpIHtcbiAgICAgIGluaXRTZWVkID0gKG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKClcbiAgICAgIGluaXRTZWVkID0geG11cjMoaW5pdFNlZWQpKClcbiAgICB9XG4gICAgdGhpcy5nZW5lcmF0b3IgPSBuZXcgTXVsYmVycnkzMihpbml0U2VlZClcbiAgfVxuICBuZXh0KCkge1xuICAgIHJldHVybiB0aGlzLmdlbmVyYXRvci5uZXh0KClcbiAgfVxuICBnZXRTdGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5nZW5lcmF0b3Iuc3RhdGUudG9TdHJpbmcoMzYpXG4gIH1cbn1cbiIsImltcG9ydCB7Y2xhbXB9IGZyb20gXCIuL3V0aWxzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR3JpZCB7XG4gIGNvbnN0cnVjdG9yKHdpZHRoLCBoZWlnaHQpIHtcbiAgICB0aGlzLndpZHRoID0gd2lkdGhcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodFxuICAgIHRoaXMuY2VsbHMgPSBuZXcgQXJyYXkodGhpcy53aWR0aCAqIHRoaXMuaGVpZ2h0KS5maWxsKDApXG4gIH1cblxuICByZXNldCAoKSB7XG4gICAgdGhpcy5jZWxscyA9IG5ldyBBcnJheSh0aGlzLndpZHRoICogdGhpcy5oZWlnaHQpLmZpbGwoMClcbiAgfVxuXG4gIHdpdGhpbiAoeCwgeSkge1xuICAgIHJldHVybiB4ID49IDAgJiYgeCA8IHRoaXMud2lkdGggJiYgeSA+PSAwICYmIHkgPCB0aGlzLmhlaWdodFxuICB9XG5cbiAgc2V0ICh4LCB5LCB2YWx1ZSkge1xuICAgIHggPSBjbGFtcCh4LCAwLCB0aGlzLndpZHRoIC0gMSlcbiAgICB5ID0gY2xhbXAoeSwgMCwgdGhpcy5oZWlnaHQgLSAxKVxuICAgIHRoaXMuY2VsbHNbeSAqIHRoaXMud2lkdGggKyB4XSA9IHZhbHVlXG4gIH1cblxuICBnZXQgKHgsIHkpIHtcbiAgICB4ID0gY2xhbXAoeCwgMCwgdGhpcy53aWR0aCAtIDEpXG4gICAgeSA9IGNsYW1wKHksIDAsIHRoaXMuaGVpZ2h0IC0gMSlcbiAgICByZXR1cm4gdGhpcy5jZWxsc1t5ICogdGhpcy53aWR0aCArIHhdXG4gIH1cblxuICBnZXREZWZhdWx0KHgsIHksIGRlZmF1bHRWYWx1ZSkge1xuICAgIGlmICghdGhpcy53aXRoaW4oeCwgeSkpIHtcbiAgICAgIHJldHVybiBkZWZhdWx0VmFsdWVcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY2VsbHNbeSAqIHRoaXMud2lkdGggKyB4XVxuICB9XG5cbiAgZmlsbCh4MSwgeTEsIHcsIGgsIHZhbHVlKSB7XG4gICAgeDEgPSBjbGFtcCh4MSwgMCwgdGhpcy53aWR0aCAtIDEpXG4gICAgeTEgPSBjbGFtcCh5MSwgMCwgdGhpcy5oZWlnaHQgLSAxKVxuICAgIHcgPSBjbGFtcCh3LCAwLCB0aGlzLndpZHRoIC0geDEpXG4gICAgaCA9IGNsYW1wKGgsIDAsIHRoaXMuaGVpZ2h0IC0geTEpXG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCBoOyArK3kpIHtcbiAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdzsgKyt4KSB7XG4gICAgICAgIHRoaXMuc2V0KHgxICsgeCwgeTEgKyB5LCB2YWx1ZSlcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IG5vdCwgcm90bCB9IGZyb20gXCIuL3V0aWxzXCJcblxuLy8gZW51bSBmb3Igcm9vbSBmZWF0dXJlcyxcbi8vICpfRE9PUjogcm9vbSBoYXMgYSBkb29yIGF0IGRpcmVjdGlvblxuLy8gKl9XQUxMOiByb29tIGlzIG9wZW4gYXQgZGlyZWN0aW9uXG4vLyBET09SIGFuZCBXQUxMIGFyZSBpbnRlcmxlYXZlZCBzbyBhIHNoaWZ0IGJ5IDQgd2lsbCByZXN1bHQgaW4gYSBmZWF0dXJlIGluXG4vLyB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uLiBTaW1wbGlmaWVkOiBOb3J0aERvb3IgPDwgNCA9PSBTb3V0aERvb3JcbmV4cG9ydCBjb25zdCBGZWF0dXJlID0ge1xuICBOb3J0aERvb3I6IDIgKiogMCxcbiAgTm9ydGhXYWxsOiAyICoqIDEsXG4gIEVhc3REb29yOiAyICoqIDIsXG4gIEVhc3RXYWxsOiAyICoqIDMsXG4gIFNvdXRoRG9vcjogMiAqKiA0LFxuICBTb3V0aFdhbGw6IDIgKiogNSxcbiAgV2VzdERvb3I6IDIgKiogNixcbiAgV2VzdFdhbGw6IDIgKiogNyxcbiAgQUxMOiAyNTZcbn1cbkZlYXR1cmUuTm9ydGggPSBGZWF0dXJlLk5vcnRoRG9vciB8IEZlYXR1cmUuTm9ydGhXYWxsXG5GZWF0dXJlLkVhc3QgPSBGZWF0dXJlLkVhc3REb29yIHwgRmVhdHVyZS5FYXN0V2FsbFxuRmVhdHVyZS5Tb3V0aCA9IEZlYXR1cmUuU291dGhEb29yIHwgRmVhdHVyZS5Tb3V0aFdhbGxcbkZlYXR1cmUuV2VzdCA9IEZlYXR1cmUuV2VzdERvb3IgfCBGZWF0dXJlLldlc3RXYWxsXG5GZWF0dXJlLkRPT1JfTUFTSyA9IEZlYXR1cmUuTm9ydGhEb29yIHwgRmVhdHVyZS5FYXN0RG9vciB8IEZlYXR1cmUuU291dGhEb29yIHwgRmVhdHVyZS5XZXN0RG9vclxuRmVhdHVyZS5XQUxMX01BU0sgPSBGZWF0dXJlLk5vcnRoV2FsbCB8IEZlYXR1cmUuRWFzdFdhbGwgfCBGZWF0dXJlLlNvdXRoV2FsbCB8IEZlYXR1cmUuV2VzdFdhbGxcblxuLy8gdXNlZCB3aGVuIHRlc3RpbmcgZm9yIHJvb21zIGF0IGdyaWQgY29vcmRpbmF0ZXNcbmNvbnN0IE9GRlNFVCA9IFtcbiAgeyB4OiAwLCB5OiAtMSB9LCB7IHg6IDAsIHk6IC0xIH0sIHsgeDogMSwgeTogMCB9LCB7IHg6IDEsIHk6IDAgfSxcbiAgeyB4OiAwLCB5OiAxIH0sIHsgeDogMCwgeTogMSB9LCB7IHg6IC0xLCB5OiAwIH0sIHsgeDogLTEsIHk6IDAgfVxuXVxuXG5jb25zdCBvZmZzZXQgPSBmdW5jdGlvbiAoeCwgeSwgZGlyKSB7XG4gIHJldHVybiB7IHg6IHggKyBPRkZTRVRbZGlyXS54LCB5OiB5ICsgT0ZGU0VUW2Rpcl0ueSB9XG59XG5cbmV4cG9ydCBjb25zdCBzaGlmdEZlYXR1cmUgPSBmdW5jdGlvbiAoZmVhdHVyZXMpIHtcbiAgcmV0dXJuIHJvdGwoZmVhdHVyZXMsIDQsIDgpXG59XG5cbmNvbnN0IG1lcmdlRmVhdHVyZXMgPSBmdW5jdGlvbiAoYSwgYiwgZGlyKSB7XG4gIC8vIG1hc2sgaXMgZXhwZWN0ZWQgdG8gYmUgYSBzaW5nbGUgc2V0IGJpdCwgb25lIG9mIHRoZSAqX0RPT1IgYml0cy5cbiAgLy8gdGhpcyBpcyBhZGRpbmcgdGhlIGNvcnJlc3BvbmRpbmcgKl9XQUxMIGJpdFxuICBsZXQgbWFzayA9IGRpciB8IHJvdGwoZGlyLCAxLCA4KVxuICBiID0gc2hpZnRGZWF0dXJlKGIpICYgbWFza1xuICByZXR1cm4gKGEgJiBub3QobWFzaykgfCBiKVxufVxuXG5jb25zdCBtZXJnZUFkamFjZW50ID0gZnVuY3Rpb24gKGdyaWQsIHgsIHksIGZlYXR1cmVzKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgODsgaSArPSAyKSB7XG4gICAgbGV0IGRpciA9IDEgPDwgaVxuICAgIGxldCBkaXIxID0gMSA8PCAoaSArIDEpXG4gICAgbGV0IG8gPSBvZmZzZXQoeCwgeSwgaSlcbiAgICAvLyBpZiB0aGUgb2Zmc2V0IGlzIG91dHNpZGUgb2YgdGhlIGdyaWQsIHJlbW92ZSBhbnkgY29ubmVjdGluZyBmZWF0dXJlc1xuICAgIC8vIGluIHRoYXQgZGlyZWN0aW9uXG4gICAgaWYgKCFncmlkLndpdGhpbihvLngsIG8ueSkpIHtcbiAgICAgIGZlYXR1cmVzICY9IG5vdChkaXIgfCBkaXIxKVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGxldCBleGlzdGluZ0ZlYXR1cmVzID0gZ3JpZC5nZXQoby54LCBvLnkpXG4gICAgICBpZiAoZXhpc3RpbmdGZWF0dXJlcyAhPT0gMCkge1xuICAgICAgICBmZWF0dXJlcyA9IG1lcmdlRmVhdHVyZXMoZmVhdHVyZXMsIGV4aXN0aW5nRmVhdHVyZXMsIGRpcilcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZlYXR1cmVzO1xufVxuXG5jb25zdCBnZW5lcmF0ZUZlYXR1cmVzID0gZnVuY3Rpb24gKHJhbmRvbSwgcHJldmlvdXMpIHtcbiAgbGV0IHJhbmRvbURvb3JzID0gTWF0aC5mbG9vcihyYW5kb20ubmV4dCgpICogRmVhdHVyZS5BTEwpXG4gIGxldCByYW5kb21XYWxscyA9IE1hdGguZmxvb3IocmFuZG9tLm5leHQoKSAqIEZlYXR1cmUuQUxMKVxuICBsZXQgZG9vcnMgPSAocmFuZG9tRG9vcnMgJiBGZWF0dXJlLkRPT1JfTUFTSykgfCAocHJldmlvdXMgJiBGZWF0dXJlLkRPT1JfTUFTSylcbiAgbGV0IHdhbGxzID0gKHJhbmRvbVdhbGxzICYgRmVhdHVyZS5XQUxMX01BU0spIHwgKHByZXZpb3VzICYgRmVhdHVyZS5XQUxMX01BU0spXG4gIC8vIGNvbWJpbmUgZG9vcnMgYW5kIHdhbGxzXG4gIC8vIHNoaWZ0IGRvb3IgYml0cyBpbnRvIHdhbGwgYml0cyBhbmQgaW52ZXJ0IGZvciBhIG1hc2sgdG8gbm90XG4gIC8vIHBsYWNlIHdhbGxzIHdlcmUgdGhlcmUgYXJlIGRvb3JzXG4gIGxldCBkb29yX21hc2sgPSBub3Qocm90bChkb29ycywgMSwgOCkpXG4gIHJldHVybiB3YWxscyAmIGRvb3JfbWFzayB8IGRvb3JzXG59XG5cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZSA9IGZ1bmN0aW9uIChncmlkLCByYW5kb20sIHgsIHksIHByZXZpb3VzLCBpdGVyKSB7XG4gIHByZXZpb3VzID0gc2hpZnRGZWF0dXJlKHByZXZpb3VzKVxuICBsZXQgZmVhdHVyZXMgPSBwcmV2aW91c1xuICBpZiAoaXRlciA+IDApIHtcbiAgICBmZWF0dXJlcyA9IGdlbmVyYXRlRmVhdHVyZXMocmFuZG9tLCBwcmV2aW91cylcbiAgfVxuICAvLyBmaXJzdCBwYXNzIG1lcmdlcyBzdXJyb3VuZGluZyBvcHBvc2luZyBmZWF0dXJlc1xuICBmZWF0dXJlcyA9IG1lcmdlQWRqYWNlbnQoZ3JpZCwgeCwgeSwgZmVhdHVyZXMpXG4gIGdyaWQuc2V0KHgsIHksIGZlYXR1cmVzKVxuICAvLyBzZWNvbmQgcGFzcyByZWN1cnNlcyBpZiBncmlkIHBvc2l0aW9uIGlzIGZyZWVcbiAgLy8gYW5kIGdlbmVyYXRlcyBtb3JlIHJhbmRvbSBmZWF0dXJlc1xuICBmb3IgKHZhciBpID0gMDsgaSA8IDg7IGkrKykge1xuICAgIGxldCBkaXIgPSAxIDw8IGlcbiAgICBsZXQgbyA9IG9mZnNldCh4LCB5LCBpKVxuICAgIGlmICghZ3JpZC53aXRoaW4oby54LCBvLnkpKSB7XG4gICAgICBjb250aW51ZVxuICAgIH1cbiAgICBsZXQgZXhpc3RpbmdGZWF0dXJlcyA9IGdyaWQuZ2V0KG8ueCwgby55KVxuICAgIGxldCBoYXNGZWF0dXJlID0gKGZlYXR1cmVzICYgZGlyKSAhPT0gMFxuICAgIGxldCBpc05vdFByZXZpb3VzID0gZGlyICE9PSBwcmV2aW91c1xuICAgIGxldCBncmlkSXNGcmVlID0gZXhpc3RpbmdGZWF0dXJlcyA9PT0gMFxuICAgIGlmIChoYXNGZWF0dXJlICYmIGlzTm90UHJldmlvdXMgJiYgZ3JpZElzRnJlZSkge1xuICAgICAgZ2VuZXJhdGUoZ3JpZCwgcmFuZG9tLCBvLngsIG8ueSwgZGlyLCBpdGVyIC0gMSlcbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFN3aXBlIHtcbiAgY29uc3RydWN0b3IoZWxlbWVudCkge1xuICAgIHRoaXMueERvd24gPSBudWxsXG4gICAgdGhpcy55RG93biA9IG51bGxcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50XG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAndG91Y2hzdGFydCcsIHRoaXMuaGFuZGxlVG91Y2hTdGFydC5iaW5kKHRoaXMpLCBmYWxzZSlcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICd0b3VjaG1vdmUnLCB0aGlzLmhhbmRsZVRvdWNoTW92ZS5iaW5kKHRoaXMpLCBmYWxzZSlcbiAgfVxuXG4gIGhhbmRsZVRvdWNoU3RhcnQoZXZlbnQpIHtcbiAgICB0aGlzLnhEb3duID0gZXZlbnQudG91Y2hlc1swXS5jbGllbnRYXG4gICAgdGhpcy55RG93biA9IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WVxuICB9XG5cbiAgaGFuZGxlVG91Y2hNb3ZlKGV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLnhEb3duIHx8ICF0aGlzLnlEb3duIHx8ICF0aGlzLm9uU3dpcGUpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHZhciB4VXAgPSBldmVudC50b3VjaGVzWzBdLmNsaWVudFhcbiAgICB2YXIgeVVwID0gZXZlbnQudG91Y2hlc1swXS5jbGllbnRZXG5cbiAgICB0aGlzLnhEaWZmID0gdGhpcy54RG93biAtIHhVcFxuICAgIHRoaXMueURpZmYgPSB0aGlzLnlEb3duIC0geVVwXG5cbiAgICBpZiAoTWF0aC5hYnModGhpcy54RGlmZikgPiBNYXRoLmFicyh0aGlzLnlEaWZmKSkgeyAvLyBNb3N0IHNpZ25pZmljYW50LlxuICAgICAgaWYgKHRoaXMueERpZmYgPiAwKSB7XG4gICAgICAgIHRoaXMub25Td2lwZShldmVudCwgXCJTd2lwZUxlZnRcIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub25Td2lwZShldmVudCwgXCJTd2lwZVJpZ2h0XCIpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLnlEaWZmID4gMCkge1xuICAgICAgICB0aGlzLm9uU3dpcGUoZXZlbnQsIFwiU3dpcGVVcFwiKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vblN3aXBlKGV2ZW50LCBcIlN3aXBlRG93blwiKVxuICAgICAgfVxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIH1cblxuICAgIHRoaXMueERvd24gPSBudWxsXG4gICAgdGhpcy55RG93biA9IG51bGxcbiAgfVxufVxuIiwiaW1wb3J0IHsgcm91dGluZSwgUmFuZG9tIH0gZnJvbSBcIi4vdXRpbHNcIlxuaW1wb3J0IEdyaWQgZnJvbSBcIi4vZ3JpZFwiXG5pbXBvcnQgeyBGZWF0dXJlLCBnZW5lcmF0ZSwgc2hpZnRGZWF0dXJlIH0gZnJvbSBcIi4vbWF6ZWdlblwiXG5pbXBvcnQgU3dpcGUgZnJvbSBcIi4vc3dpcGVcIlxuaW1wb3J0IFRpbGVJbWFnZSBmcm9tIFwiLi4vYXNzZXRzL3RpbGVzLnBuZ1wiXG5pbXBvcnQgU3ByaXRlc0ltYWdlIGZyb20gXCIuLi9hc3NldHMvc3ByaXRlcy5wbmdcIlxuXG5jb25zdCBQYXJhbSA9IHtcbiAgLy8gd2lkdGggYW5kIGhlaWdodCBvZiByb29tcyBpbiBwaXhlbHNcbiAgUk9PTV9TSVpFOiA1LFxuICAvLyBsYXJnZXIgc2NhbGUgZm9yIGJpZ2dlciBwaXhlbHNcbiAgU0NBTEU6IDMyLFxuICBJVEVSQVRJT05TOiAxMlxufVxuXG5jb25zdCByYW5kb20gPSBuZXcgUmFuZG9tKHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cigxKSlcblxuY29uc3QgY29tcHV0ZVRpbGUgPSBmdW5jdGlvbihncmlkLCB4LCB5KSB7XG4gIGxldCB2ID0gZ3JpZC5nZXQoeCwgeSlcbiAgcmV0dXJuIHYgKiAoXG4gICAgZ3JpZC5nZXREZWZhdWx0KHgsIHkgLSAxLCAxKSAvLyBOIDFcbiAgICB8IGdyaWQuZ2V0RGVmYXVsdCh4ICsgMSwgeSwgMSkgPDwgMSAvLyBFIDJcbiAgICB8IGdyaWQuZ2V0RGVmYXVsdCh4LCB5ICsgMSwgMSkgPDwgMiAvLyBTIDRcbiAgICB8IGdyaWQuZ2V0RGVmYXVsdCh4IC0gMSwgeSwgMSkgPDwgMyAvLyBXIDhcbiAgKVxufVxuXG5jb25zdCBnZW5lcmF0ZVRpbGVzID0gZnVuY3Rpb24gKHRpbGVHcmlkLCBtYXplR3JpZCkge1xuICBsZXQgZmxvb3IgPSAwXG4gIGxldCB3YWxsID0gMVxuICBsZXQgdG1wR3JpZCA9IG5ldyBHcmlkKHRpbGVHcmlkLndpZHRoLCB0aWxlR3JpZC5oZWlnaHQpXG4gIHRtcEdyaWQuZmlsbCgwLCAwLCB0bXBHcmlkLndpZHRoLCB0bXBHcmlkLmhlaWdodCwgd2FsbClcbiAgZm9yIChsZXQgbXkgPSAwLCBtaCA9IG1hemVHcmlkLmhlaWdodDsgbXkgPCBtaDsgbXkrKykge1xuICAgIGZvciAobGV0IG14ID0gMCwgbXcgPSBtYXplR3JpZC53aWR0aDsgbXggPCBtdzsgbXgrKykge1xuICAgICAgbGV0IGZlYXR1cmVzID0gbWF6ZUdyaWQuZ2V0KG14LCBteSlcbiAgICAgIGlmIChmZWF0dXJlcyA9PT0gMCkgY29udGludWVcbiAgICAgIGxldCBkb29yU2l6ZSA9IE1hdGguZmxvb3IoUGFyYW0uUk9PTV9TSVpFIC8gMylcbiAgICAgIGxldCB0eCA9IG14ICogUGFyYW0uUk9PTV9TSVpFXG4gICAgICBsZXQgdHkgPSBteSAqIFBhcmFtLlJPT01fU0laRVxuICAgICAgdG1wR3JpZC5maWxsKHR4ICsgMSwgdHkgKyAxLFxuICAgICAgICBQYXJhbS5ST09NX1NJWkUgLSAyLCBQYXJhbS5ST09NX1NJWkUgLSAyLFxuICAgICAgICBmbG9vcilcbiAgICAgIGlmICgoZmVhdHVyZXMgJiBGZWF0dXJlLk5vcnRoRG9vcikgIT09IDApIHtcbiAgICAgICAgdG1wR3JpZC5maWxsKHR4ICsgMSArIGRvb3JTaXplLCB0eSxcbiAgICAgICAgICBkb29yU2l6ZSwgMSxcbiAgICAgICAgICBmbG9vcilcbiAgICAgIH1cbiAgICAgIGlmICgoZmVhdHVyZXMgJiBGZWF0dXJlLk5vcnRoV2FsbCkgIT09IDApIHtcbiAgICAgICAgdG1wR3JpZC5maWxsKHR4ICsgMSwgdHksXG4gICAgICAgICAgUGFyYW0uUk9PTV9TSVpFIC0gMiwgMSxcbiAgICAgICAgICBmbG9vcilcbiAgICAgIH1cbiAgICAgIGlmICgoZmVhdHVyZXMgJiBGZWF0dXJlLkVhc3REb29yKSAhPT0gMCkge1xuICAgICAgICB0bXBHcmlkLmZpbGwodHggKyBQYXJhbS5ST09NX1NJWkUgLSAxLCB0eSArIDEgKyBkb29yU2l6ZSxcbiAgICAgICAgICAxLCBkb29yU2l6ZSxcbiAgICAgICAgICBmbG9vcilcbiAgICAgIH1cbiAgICAgIGlmICgoZmVhdHVyZXMgJiBGZWF0dXJlLkVhc3RXYWxsKSAhPT0gMCkge1xuICAgICAgICB0bXBHcmlkLmZpbGwodHggKyBQYXJhbS5ST09NX1NJWkUgLSAxLCB0eSArIDEsXG4gICAgICAgICAgMSwgUGFyYW0uUk9PTV9TSVpFIC0gMixcbiAgICAgICAgICBmbG9vcilcbiAgICAgIH1cbiAgICAgIGlmICgoZmVhdHVyZXMgJiBGZWF0dXJlLlNvdXRoRG9vcikgIT09IDApIHtcbiAgICAgICAgdG1wR3JpZC5maWxsKHR4ICsgMSArIGRvb3JTaXplLCB0eSArIFBhcmFtLlJPT01fU0laRSAtIDEsXG4gICAgICAgICAgZG9vclNpemUsIDEsXG4gICAgICAgICAgZmxvb3IpXG4gICAgICB9XG4gICAgICBpZiAoKGZlYXR1cmVzICYgRmVhdHVyZS5Tb3V0aFdhbGwpICE9PSAwKSB7XG4gICAgICAgIHRtcEdyaWQuZmlsbCh0eCArIDEsIHR5ICsgUGFyYW0uUk9PTV9TSVpFIC0gMSxcbiAgICAgICAgICBQYXJhbS5ST09NX1NJWkUgLSAyLCAxLFxuICAgICAgICAgIGZsb29yKVxuICAgICAgfVxuICAgICAgaWYgKChmZWF0dXJlcyAmIEZlYXR1cmUuV2VzdERvb3IpICE9PSAwKSB7XG4gICAgICAgIHRtcEdyaWQuZmlsbCh0eCwgdHkgKyAxICsgZG9vclNpemUsXG4gICAgICAgICAgMSwgZG9vclNpemUsXG4gICAgICAgICAgZmxvb3IpXG4gICAgICB9XG4gICAgICBpZiAoKGZlYXR1cmVzICYgRmVhdHVyZS5XZXN0V2FsbCkgIT09IDApIHtcbiAgICAgICAgdG1wR3JpZC5maWxsKHR4LCB0eSArIDEsXG4gICAgICAgICAgMSwgUGFyYW0uUk9PTV9TSVpFIC0gMixcbiAgICAgICAgICBmbG9vcilcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZm9yIChsZXQgeSA9IDAsIHRoID0gdGlsZUdyaWQuaGVpZ2h0OyB5IDwgdGg7IHkrKykge1xuICAgIGZvciAobGV0IHggPSAwLCB0dyA9IHRpbGVHcmlkLndpZHRoOyB4IDwgdHc7IHgrKykge1xuICAgICAgdGlsZUdyaWQuc2V0KHgsIHksIGNvbXB1dGVUaWxlKHRtcEdyaWQsIHgsIHkpKVxuICAgIH1cbiAgfVxufVxuXG5jb25zdCBvZmZzY3JlZW5DYW52YXMgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIG5ldyBPZmZzY3JlZW5DYW52YXMod2lkdGgsIGhlaWdodClcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHRcbiAgICAgICAgcmV0dXJuIGNhbnZhc1xuICAgIH1cbn1cblxuY29uc3QgbG9hZEltYWdlID0gZnVuY3Rpb24gKHNyYykge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpXG4gICAgaW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHJlc29sdmUoaW1nKSlcbiAgICBpbWcuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIChlcnIpID0+IHJlamVjdChlcnIpKVxuICAgIGltZy5zcmMgPSBzcmNcbiAgfSlcbn1cblxuY29uc3QgTW92ZU5vcnRoID0ge29mZnNldDoge3g6IDAsIHk6IC0xfSwgbWFzazogRmVhdHVyZS5Ob3J0aH1cbmNvbnN0IE1vdmVFYXN0ID0ge29mZnNldDoge3g6IDEsIHk6IDB9LCBtYXNrOiBGZWF0dXJlLkVhc3R9XG5jb25zdCBNb3ZlU291dGggPSB7b2Zmc2V0OiB7eDogMCwgeTogMX0sIG1hc2s6IEZlYXR1cmUuU291dGh9XG5jb25zdCBNb3ZlV2VzdCA9IHtvZmZzZXQ6IHt4OiAtMSwgeTogMH0sIG1hc2s6IEZlYXR1cmUuV2VzdH1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZSB7XG4gIGNvbnN0cnVjdG9yKGNhbnZhcykge1xuICAgIHRoaXMuY2FudmFzID0gY2FudmFzXG4gICAgdGhpcy5jYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aFxuICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodFxuICAgIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpXG4gICAgdGhpcy5iZ0NhbnZhcyA9IG9mZnNjcmVlbkNhbnZhcyh0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KVxuICAgIHRoaXMubWF6ZUdyaWQgPSBuZXcgR3JpZChcbiAgICAgIHBhcnNlSW50KGNhbnZhcy53aWR0aCAvIFBhcmFtLlNDQUxFIC8gUGFyYW0uUk9PTV9TSVpFKSxcbiAgICAgIHBhcnNlSW50KGNhbnZhcy5oZWlnaHQgLyBQYXJhbS5TQ0FMRSAvIFBhcmFtLlJPT01fU0laRSkpXG4gICAgdGhpcy50aWxlR3JpZCA9IG5ldyBHcmlkKFxuICAgICAgcGFyc2VJbnQoY2FudmFzLndpZHRoIC8gUGFyYW0uU0NBTEUpLFxuICAgICAgcGFyc2VJbnQoY2FudmFzLmhlaWdodCAvIFBhcmFtLlNDQUxFKSxcbiAgICApXG4gICAgdGhpcy5wbGF5ZXIgPSB7aGVhbHRoOiAzfVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4gdGhpcy5oYW5kbGVJbnB1dChlLCBlLmtleSkpXG4gICAgbGV0IHN3aXBlID0gbmV3IFN3aXBlKGNhbnZhcylcbiAgICBzd2lwZS5vblN3aXBlID0gKGUsIHN3aXBlRGlyKSA9PiB0aGlzLmhhbmRsZUlucHV0KGUsIHN3aXBlRGlyKVxuXG4gICAgUHJvbWlzZS5hbGwoW2xvYWRJbWFnZShUaWxlSW1hZ2UpLCBsb2FkSW1hZ2UoU3ByaXRlc0ltYWdlKV0pXG4gICAgICAudGhlbigoaW1hZ2VzKSA9PiB7XG4gICAgICAgIHRoaXMudGlsZXMgPSBpbWFnZXNbMF1cbiAgICAgICAgdGhpcy50aWxlU2l6ZSA9IHRoaXMudGlsZXMubmF0dXJhbFdpZHRoIC8gNFxuICAgICAgICB0aGlzLnNwcml0ZXMgPSBpbWFnZXNbMV1cbiAgICAgICAgdGhpcy5zcHJpdGVTaXplID0gOFxuICAgICAgICB0aGlzLnJlc2V0KClcbiAgICAgIH0pXG4gIH1cbiAgcmVzZXQobmV3SGFzaCkge1xuICAgIGlmIChuZXdIYXNoKVxuICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKG51bGwsIG51bGwsIFwiI1wiICsgcmFuZG9tLmdldFN0YXRlKCkpXG4gICAgdGhpcy5tYXplR3JpZC5yZXNldCgpXG4gICAgdGhpcy50aWxlR3JpZC5yZXNldCgpXG4gICAgY29uc3QgY2VudGVyWCA9IHBhcnNlSW50KHRoaXMubWF6ZUdyaWQud2lkdGggLyAyKVxuICAgIGNvbnN0IGNlbnRlclkgPSBwYXJzZUludCh0aGlzLm1hemVHcmlkLmhlaWdodCAvIDIpXG4gICAgZ2VuZXJhdGUodGhpcy5tYXplR3JpZCwgcmFuZG9tLCBjZW50ZXJYLCBjZW50ZXJZLCAwLCBQYXJhbS5JVEVSQVRJT05TKVxuICAgIGdlbmVyYXRlVGlsZXModGhpcy50aWxlR3JpZCwgdGhpcy5tYXplR3JpZClcbiAgICB0aGlzLmRyYXdNYXplKHRoaXMuYmdDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpKVxuICAgIHRoaXMucGxheWVyLnBvcyA9IHt4OiBjZW50ZXJYLCB5OiBjZW50ZXJZLCBkaXI6IDF9XG4gICAgdGhpcy5nZW5lcmF0ZVRyZWFzdXJlcygpXG4gICAgdGhpcy5kcmF3KClcbiAgfVxuICBnZW5lcmF0ZVRyZWFzdXJlcygpIHtcbiAgICB0aGlzLm51bVRyZWFzdXJlcyA9IDMgKyBNYXRoLnJvdW5kKHJhbmRvbS5uZXh0KCkgKiA5KVxuICAgIHRoaXMudHJlYXN1cmVzID0gW11cbiAgICBsZXQgY2hlY2sgPSAxMDAwXG4gICAgd2hpbGUgKHRoaXMudHJlYXN1cmVzLmxlbmd0aCA8IHRoaXMubnVtVHJlYXN1cmVzICYmIGNoZWNrID4gMCkge1xuICAgICAgY2hlY2stLVxuICAgICAgbGV0IHRyZWFzdXJlID0ge1xuICAgICAgICB4OiBwYXJzZUludChyYW5kb20ubmV4dCgpICogdGhpcy5tYXplR3JpZC53aWR0aCksXG4gICAgICAgIHk6IHBhcnNlSW50KHJhbmRvbS5uZXh0KCkgKiB0aGlzLm1hemVHcmlkLmhlaWdodClcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm1hemVHcmlkLmdldCh0cmVhc3VyZS54LCB0cmVhc3VyZS55KSAhPT0gMCkge1xuICAgICAgICB0aGlzLnRyZWFzdXJlcy5wdXNoKHRyZWFzdXJlKVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBwbGF5ZXJNb3ZlQnkoZGVsdGFWZWN0b3IpIHtcbiAgICBsZXQgaW5pdFggPSB0aGlzLnBsYXllci5wb3MueFxuICAgIGxldCBpbml0WSA9IHRoaXMucGxheWVyLnBvcy55XG4gICAgdGhpcy5wbGF5ZXIucG9zLmRpciA9IGRlbHRhVmVjdG9yLnggPj0gMCA/IDEgOiAtMVxuICAgIHJvdXRpbmUoNTAwLCBmdW5jdGlvbiAoZGVsdGEpIHtcbiAgICAgIHRoaXMucGxheWVyLnBvcy54ID0gaW5pdFggKyBkZWx0YVZlY3Rvci54ICogZGVsdGFcbiAgICAgIHRoaXMucGxheWVyLnBvcy55ID0gaW5pdFkgKyBkZWx0YVZlY3Rvci55ICogZGVsdGFcbiAgICAgIGlmIChkZWx0YSA9PT0gMSkge1xuICAgICAgICB0aGlzLmNoZWNrR2Vtc0NvbGxlY3RlZCgpXG4gICAgICB9XG4gICAgICB0aGlzLmRyYXcoKVxuICAgIH0uYmluZCh0aGlzKSlcbiAgfVxuICBwbGF5ZXJNb3ZlKGRpcikge1xuICAgIGxldCB0YXJnZXQgPSB7XG4gICAgICB4OiB0aGlzLnBsYXllci5wb3MueCArIGRpci5vZmZzZXQueCxcbiAgICAgIHk6IHRoaXMucGxheWVyLnBvcy55ICsgZGlyLm9mZnNldC55XG4gICAgfVxuICAgIGxldCByb29tRnJvbSA9IHRoaXMubWF6ZUdyaWQuZ2V0KHRoaXMucGxheWVyLnBvcy54LCB0aGlzLnBsYXllci5wb3MueSlcbiAgICBsZXQgcm9vbVRvID0gdGhpcy5tYXplR3JpZC5nZXQodGFyZ2V0LngsIHRhcmdldC55KVxuICAgIGxldCBjYW5Nb3ZlVG8gPSAocm9vbVRvICYgc2hpZnRGZWF0dXJlKGRpci5tYXNrKSkgIT09IDBcbiAgICBsZXQgY2FuTW92ZUZyb20gPSAocm9vbUZyb20gJiBkaXIubWFzaykgIT09IDBcbiAgICBpZiAoY2FuTW92ZUZyb20gJiYgY2FuTW92ZVRvKSB7XG4gICAgICB0aGlzLnBsYXllck1vdmVCeShkaXIub2Zmc2V0KVxuICAgIH1cbiAgfVxuICBjaGVja0dlbXNDb2xsZWN0ZWQoKSB7XG4gICAgdGhpcy50cmVhc3VyZXMgPSB0aGlzLnRyZWFzdXJlcy5maWx0ZXIoZnVuY3Rpb24gKGdlbSkge1xuICAgICAgcmV0dXJuICEoZ2VtLnggPT09IHRoaXMucGxheWVyLnBvcy54ICYmIGdlbS55ID09PSB0aGlzLnBsYXllci5wb3MueSlcbiAgICB9LmJpbmQodGhpcykpXG4gICAgaWYgKHRoaXMudHJlYXN1cmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5yZXNldCh0cnVlKVxuICAgIH1cbiAgfVxuICBoYW5kbGVJbnB1dChlLCBpbnB1dCkge1xuICAgIHN3aXRjaCAoaW5wdXQpIHtcbiAgICAgIGNhc2UgXCJTd2lwZVVwXCI6XG4gICAgICBjYXNlIFwiQXJyb3dVcFwiOlxuICAgICAgICB0aGlzLnBsYXllck1vdmUoTW92ZU5vcnRoKVxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiU3dpcGVEb3duXCI6XG4gICAgICBjYXNlIFwiQXJyb3dEb3duXCI6XG4gICAgICAgIHRoaXMucGxheWVyTW92ZShNb3ZlU291dGgpXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJTd2lwZUxlZnRcIjpcbiAgICAgIGNhc2UgXCJBcnJvd0xlZnRcIjpcbiAgICAgICAgdGhpcy5wbGF5ZXJNb3ZlKE1vdmVXZXN0KVxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiU3dpcGVSaWdodFwiOlxuICAgICAgY2FzZSBcIkFycm93UmlnaHRcIjpcbiAgICAgICAgdGhpcy5wbGF5ZXJNb3ZlKE1vdmVFYXN0KVxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIGRyYXcoKSB7XG4gICAgdGhpcy5jdHguZHJhd0ltYWdlKHRoaXMuYmdDYW52YXMsIDAsIDApXG4gICAgdGhpcy5kcmF3VHJlYXN1cmVzKHRoaXMuY3R4KVxuICAgIHRoaXMuZHJhd1BsYXllcih0aGlzLmN0eClcbiAgfVxuICBkcmF3TWF6ZShjdHgpIHtcbiAgICBjdHguc2F2ZSgpXG4gICAgY3R4LnNjYWxlKFxuICAgICAgcGFyc2VJbnQoUGFyYW0uU0NBTEUgLyB0aGlzLnRpbGVTaXplKSxcbiAgICAgIHBhcnNlSW50KFBhcmFtLlNDQUxFIC8gdGhpcy50aWxlU2l6ZSkpXG4gICAgY3R4LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGZhbHNlXG4gICAgZm9yIChsZXQgeSA9IDAsIHRoID0gdGhpcy50aWxlR3JpZC5oZWlnaHQ7IHkgPCB0aDsgeSsrKSB7XG4gICAgICBmb3IgKGxldCB4ID0gMCwgdHcgPSB0aGlzLnRpbGVHcmlkLndpZHRoOyB4IDwgdHc7IHgrKykge1xuICAgICAgICB0aGlzLmRyYXdUaWxlKGN0eCwgeCwgeSwgdGhpcy50aWxlR3JpZC5nZXQoeCwgeSkpXG4gICAgICB9XG4gICAgfVxuICAgIGN0eC5yZXN0b3JlKClcbiAgfVxuICBkcmF3VGlsZSAoY3R4LCB4LCB5LCB0aWxlSWQpIHtcbiAgICBsZXQgc3ggPSAodGlsZUlkICUgNCkgKiB0aGlzLnRpbGVTaXplXG4gICAgbGV0IHN5ID0gTWF0aC5mbG9vcih0aWxlSWQgLyA0KSAqIHRoaXMudGlsZVNpemVcbiAgICBjdHguZHJhd0ltYWdlKHRoaXMudGlsZXMsXG4gICAgICBzeCwgc3ksIHRoaXMudGlsZVNpemUsIHRoaXMudGlsZVNpemUsXG4gICAgICB4ICogdGhpcy50aWxlU2l6ZSwgeSAqIHRoaXMudGlsZVNpemUsXG4gICAgICB0aGlzLnRpbGVTaXplLCB0aGlzLnRpbGVTaXplKVxuICB9XG4gIGRyYXdQbGF5ZXIoY3R4KSB7XG4gICAgY29uc3Qgc2NhbGUgPSBNYXRoLmZsb29yKFBhcmFtLlNDQUxFIC8gdGhpcy5zcHJpdGVTaXplKVxuICAgIGNvbnN0IG9mZnNldE11bHQgPSBQYXJhbS5ST09NX1NJWkUgKiB0aGlzLnNwcml0ZVNpemVcbiAgICBjb25zdCBvZmZzZXQgPSBQYXJhbS5ST09NX1NJWkUgKiB0aGlzLnNwcml0ZVNpemUgKiAwLjUgLSB0aGlzLnNwcml0ZVNpemUgKiAwLjVcbiAgICBjdHguc2F2ZSgpXG4gICAgY3R4LnNjYWxlKHNjYWxlLCBzY2FsZSlcbiAgICBjdHgudHJhbnNsYXRlKFxuICAgICAgdGhpcy5wbGF5ZXIucG9zLnggKiBvZmZzZXRNdWx0ICsgb2Zmc2V0LFxuICAgICAgdGhpcy5wbGF5ZXIucG9zLnkgKiBvZmZzZXRNdWx0ICsgb2Zmc2V0KVxuICAgIGN0eC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZVxuICAgIGN0eC5zY2FsZSh0aGlzLnBsYXllci5wb3MuZGlyLCAxKVxuICAgIGN0eC5kcmF3SW1hZ2UodGhpcy5zcHJpdGVzLFxuICAgICAgMCwgMCwgdGhpcy5zcHJpdGVTaXplLCB0aGlzLnNwcml0ZVNpemUsXG4gICAgICAwLCAwLFxuICAgICAgdGhpcy5zcHJpdGVTaXplICogdGhpcy5wbGF5ZXIucG9zLmRpciwgdGhpcy5zcHJpdGVTaXplKVxuICAgIGN0eC5yZXN0b3JlKClcbiAgfVxuICBkcmF3VHJlYXN1cmVzKGN0eCkge1xuICAgIGNvbnN0IHNjYWxlID0gTWF0aC5mbG9vcihQYXJhbS5TQ0FMRSAvIHRoaXMuc3ByaXRlU2l6ZSlcbiAgICBjb25zdCBvZmZzZXRNdWx0ID0gUGFyYW0uUk9PTV9TSVpFICogdGhpcy5zcHJpdGVTaXplXG4gICAgY29uc3Qgb2Zmc2V0ID0gUGFyYW0uUk9PTV9TSVpFICogdGhpcy5zcHJpdGVTaXplICogMC41IC0gdGhpcy5zcHJpdGVTaXplICogMC41XG4gICAgY3R4LnNhdmUoKVxuICAgIGN0eC5zY2FsZShzY2FsZSwgc2NhbGUpXG4gICAgY3R4LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGZhbHNlXG4gICAgZm9yICh2YXIgaSA9IDAsIG4gPSB0aGlzLnRyZWFzdXJlcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgIGN0eC5kcmF3SW1hZ2UodGhpcy5zcHJpdGVzLFxuICAgICAgICA4LCAwLCB0aGlzLnNwcml0ZVNpemUsIHRoaXMuc3ByaXRlU2l6ZSxcbiAgICAgICAgdGhpcy50cmVhc3VyZXNbaV0ueCAqIG9mZnNldE11bHQgKyBvZmZzZXQsIHRoaXMudHJlYXN1cmVzW2ldLnkgKiBvZmZzZXRNdWx0ICsgb2Zmc2V0LFxuICAgICAgICB0aGlzLnNwcml0ZVNpemUsIHRoaXMuc3ByaXRlU2l6ZSlcbiAgICB9XG4gICAgY3R4LnJlc3RvcmUoKVxuICB9XG59XG4iLCJpbXBvcnQgXCIuL21haW4uY3NzXCJcbmltcG9ydCBHYW1lIGZyb20gXCIuL2dhbWVcIlxuXG5jb25zdCBzdGFydFNjcmVlbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcbmxldCBoaWRlU3RhcnRTY3JlZW5cbmhpZGVTdGFydFNjcmVlbiA9IChlKSA9PiB7XG4gIHN0YXJ0U2NyZWVuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxuICBzdGFydFNjcmVlbi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGlkZVN0YXJ0U2NyZWVuKVxufVxuc3RhcnRTY3JlZW4uY2xhc3NMaXN0LmFkZChcInN0YXJ0LXNjcmVlblwiKVxuc3RhcnRTY3JlZW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhpZGVTdGFydFNjcmVlbilcbnN0YXJ0U2NyZWVuLmlubmVySFRNTCA9IGBcbjxkaXY+XG48ZGl2IGNsYXNzPVwidGl0bGVcIj5Db2xsZWN0IEdlbXM8L2Rpdj5cbjxkaXY+UHJlc3MgYXJyb3cga2V5cyB0byBtb3ZlLjwvZGl2PlxuPGRpdj5PciBzd2lwZSB0byBtb3ZlLjwvZGl2PlxuPGRpdj5DbGljayBvciB0YXAgdG8gc3RhcnQ8L2Rpdj5cbjwvZGl2PlxuYFxubGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIilcbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY2FudmFzKVxuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzdGFydFNjcmVlbilcbndpbmRvdy5nYW1lID0gbmV3IEdhbWUoY2FudmFzKVxuIl0sInNvdXJjZVJvb3QiOiIifQ==